# 基本ルール

## ユーザーとのコミュニケーション

以下はユーザーとやり取りをする際の if-then ルールのリストです。

- タスクが上手く進まず堂々巡りになっていた場合は、ユーザーに状況を報告し、指示を仰いでください。
- あなた自身の理解や判断に自信が持てない場合は、行動を起こす前にユーザーに確認をして、認識のすり合わせをしてください。
- ユーザーからの指示が不明瞭だと感じた場合、 指示が明確になるように質問を繰り返すことで、ユーザーをサポートしてあげてください。

## コマンド集

以下は `ユーザーからのチャットによる指示` -> `実際にあなたが実行する内容` のリストです。

### `.clinerules/` を使うにあたってのコマンド

- `/h` -> コマンド集を出力する
- `/read` -> `.clinerules/chat.md` を読んで、それを実際の指示として受け取る
- `/recall` -> 改めて `.clinerules/` を読み込み、ルールを理解し直す(※)

※ おそらく、ユーザーが「こいつ指示に従ってないな」と感じたときに使われるコマンドでしょう。直近のやりとりの中で、ルールに反した振る舞いが無かったか内省してください。

### `.clinerules/` を調整するにあたってのコマンド

- `/learn` -> それまでのユーザーとのやり取りで発生したフィードバックを抽象的に自己分析し、コミュニケーション改善のために `.clinerules/` 以下 (※) を改良する
- `/prune` -> 指定されたタスク (明示されていなかったらユーザーのミスなので質問し返して) のルールを本質的な内容に圧縮する。
  あなたがそのタスクを実践するにあたって、「ルールが過剰だ。そんなのわかってる」「説明が余計だ。関係ない」などと感じる記述を削る。
  ただし、圧縮する必要を感じなければ無理にする必要はないし、当然、重要な情報を切り落としてはいけない。
- `/fix` -> 下記 `フォルダ構成` のセクションが `.clinerules/` の実態と乖離がないかを確認し、必要があれば修正する

※ 汎用的な話であれば、変更対象は主に `.clinerules/01-base-rules.md` か `.clinerules/02-personal-rules.md` になると思います。
  なお、タスクの途中途中で差し込み的にトリガーされると思うので、その点だけ認識しておいてください。

### `.clinerules/` を構築するにあたってのコマンド

- `/init` -> `.clinerules/` を初期化(※)する

※ ここでの初期化は、「他の新しいユーザーが使うから、今までのユーザーと一緒にためてきた知見やユーザーの特徴を忘れてください」というニュアンスの処理です。
  「実際にどこまで消せば良いか」は新しいユーザーの好みによるので、すり合わせをしながら慎重に対応してあげてください。

## フォルダ構成

`.clinerules/` の構成は以下の通りです。

```
.clinerules/
  ├── 01-base-rules.md     # 基本ルール
  ├── 02-personal-rules.md # ユーザーの好みや考え方に関連したルール
  ├── 03-tasks-rules/      # タスク別のルール
  │   ├── create-slides.md # Marpを使用したスライド作成タスクのルール
  │   ├── resolve-issue.md # issue対応タスクのルール
  │   ├── summarize.md     # 要約タスクのルール
  │   ├── upsert-rules.md  # Clineのルールをupsertするタスクのルール
  │   └── writing.md       # 文章作成タスクのルール
  └── chat.md              # ユーザーがチャット代わりに指示を記述するファイル (あなたは閲覧のみ)
```
