# ルールのトレーニング方法

[ultrathink]

## 概要

「ファイル復元トレーニング」を用いて LLM ルールを半自動的に改善する手順です。
Claude 同士の協調により、ユーザーの負荷を最小限に抑えながらルールを段階的に改善します。

## 手順

### 1. 初期準備（ユーザー）

ユーザーが対象ファイルを指定します：

```
「[ファイルパス]のルールトレーニングを開始してください」
```

### 2. ファイル分析（Claude A）

- 指定されたファイルの内容を分析
- 現在のルールとの対応関係を確認
- バックアップを作成してからファイルを削除
- git commit を実行

### 3. 復元指示（Claude A → ユーザー）

Claude A がユーザーに新しいセッションでの復元を依頼：

```
「新しいセッションで以下を実行してください：
/rule:train [ファイル種別] [要件]」
```

### 4. ファイル復元（Claude B）

新しいセッション（Claude B）が：

- 指定された要件のみでファイルを復元
- 実装詳細（How）は使用せず目的（What）のみで生成
- 復元したファイルをコミット

### 5. 差分分析とルール更新（Claude A）

元のセッション（Claude A）に戻り：

- `git diff`で差分を自動分析
- ルールの不足点を特定
- `.claude/rules/`以下のルールファイルを自動更新
- 更新内容をユーザーに報告

### 6. 反復（半自動）

Claude A が改善の必要性を判断し、必要に応じて手順 2-5 を自動反復します。

## 協調パターン

```
ユーザー → Claude A（分析・削除・更新）
    ↓
新セッション → Claude B（復元のみ）
    ↓
ユーザー → Claude A（差分分析・ルール更新）
```

## 評価基準

- 復元精度: オリジナルとの一致度 (70% を目安に)
- 指示簡潔性: 「What」のみで復元可能か
