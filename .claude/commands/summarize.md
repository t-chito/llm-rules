# Summarize Command

## 概要
情報源を1つずつ段階的に処理し、ファイルに書き出して要約するコマンドです。

## 処理フロー
1. **初期化**: `.claude/workspaces/summarize_${sanitized_theme}/` ワークスペース作成
2. **合意形成**: context.mdでテーマ、目的、情報源を合意
3. **順次処理**: 各情報源を1つずつ完全に処理
4. **イテレーティブ要約**: 各情報源処理後にsummary.mdを段階的に更新

## ファイル構造
```
.claude/workspaces/summarize_${sanitized_theme}/
├── context.md                  # テーマ、目的、情報源一覧と進捗
├── ${index}_${title}_summary.md # 各情報源の個別要約（学びと疑問含む）
└── summary.md                  # 段階的に更新される要約
```

## 順次処理の詳細プロセス
各情報源に対して以下を実行：

1. **取得**: 情報源を1つのみ取得
2. **進捗更新**: context.mdの進捗状況を更新
3. **3回読み込み**:
   - 1回目: 全体像把握
   - 2回目: 重要概念抽出
   - 3回目: 関連性・論理構造分析
4. **要約作成**: 個別要約ファイルに記録
5. **学び記録**: 同じファイルに学びと疑問を記録
6. **完了記録**: context.mdで処理完了をマーク

- do : 1 つ記事を読んで要約する -> summary を更新 -> 次の記事に着手する
- don't : 全ての記事を読む -> それぞれの記事の要約を始める -> summary を書く

## 個別分析フォーマット
各要約ファイルには以下を含める：
- **一致する内容**: 既存のsummary.mdと矛盾しない内容
- **対立する内容**: 既存のsummary.mdと矛盾する内容、対立した内容
- **目的とは異なるが重要な内容**: 直接的ではないが重要な情報
- **削減したトピック**: 目的と関係ないか重要度が低いと判断したもの
- **カバー率と削減理由**: 元情報をどの程度カバーしているか、削減した理由
- **学びと疑問**: この情報源から得た学びと新たな疑問

## context.mdの構造と合意形成

### context.mdの構造
```markdown
# Context: [テーマ]

## テーマ
[テーマの説明]

## 目的
[分析の目的と期待する成果物]

## 情報源一覧と進捗状況
- [x] [記事1のタイトル](URL1)
- [x] [記事2のタイトル](URL2)
- [ ] [記事3のタイトル](URL3)

## 分析の観点
[重要度と分析の観点]
```

### 合意形成プロセス
1. テーマと目的をユーザーと議論
2. 情報源の範囲と期待する成果物を明確化
3. 分析の観点と重要度を合意
4. 情報源一覧をチェックリスト形式で進捗管理
5. context.mdに合意事項を記録して確定
