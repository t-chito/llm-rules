---
description: comprehensive code review
reference: https://zenn.dev/razokulover/articles/058fede74dbbe0
---

# Code Review Command

## 要求

$ARGUMENTS ディレクトリの issue、PR description、diff を読み、3つそれぞれを比較した上で包括的なコードレビューを行います。

## レビューアプローチ

以下の3つの観点から総合的にレビューを実施します：

### 1. 実装の妥当性チェック

以下のチェックリストに基づいて評価を行います：

- **目的・方針の適切性**
  - 変更内容がビジネス要件・設計仕様と合致しているか
  - そもそもこの実装で解決すべき課題かどうか

- **実装範囲の妥当性**
  - 変更すべきファイル／機能に抜け漏れはないか
  - 不要なファイル／機能の変更が含まれていないか
  - 例外ケースやエラーハンドリング等、考慮すべき項目が網羅されているか

- **ロジックの正しさ**
  - 条件分岐やループなど、主要な処理フローが仕様どおり動作するか
  - エッジケース（境界値、異常系）が想定内かどうか

- **既存機能への影響**
  - 後方互換性が保たれているか
  - 他モジュール／サービスとの連携に問題がないか

- **外部依存の扱い**
  - API 呼び出し／DB 操作の引数・戻り値が正しいか
  - タイムアウトや例外時のリトライ設計が適切か

### 2. 設計意図の確認

実装の「Why」に焦点を当てた質問を通じて、設計判断の妥当性を確認します。特に以下の観点から質問を構成します：

- なぜこのアプローチを選択したのか
- 他の選択肢を検討したか、検討した場合なぜ採用しなかったのか
- 将来的な拡張性や保守性は考慮されているか
- パフォーマンスやセキュリティの観点から最適な選択か

### 3. 技術的な詳細レビュー

`./tech-review-rules/` 以下のガイドラインに従い、厳密な技術レビューを実施します：

- `general_code_review_guide.md` の一般的なコードレビューガイドライン
- `rails_specific_code_review_guide.md` の Rails 固有のレビューガイドライン（該当する場合）
- `reviewer_personality.md` に記載されている観点での評価

## レビュー実施ルール

- 良い実装については明示的に言及しません
- 改善可能な点、潜在的な問題、懸念事項を必ず特定します
- リポジトリ全体のコンテキストを考慮した評価を行います
- 具体的で実行可能な改善提案を提供します

## 出力形式

レビュー結果は $ARGUMENTS ディレクトリに `review_result.md` として以下の構成で出力します：

1. **サマリー**: 全体的な評価と主要な懸念事項
2. **必須対応項目**: 修正が必要な重要な問題
3. **推奨改善項目**: 品質向上のための提案
4. **質問事項**: 設計意図や実装判断に関する確認事項
5. **詳細コメント**: ファイル・行番号ごとの具体的な指摘