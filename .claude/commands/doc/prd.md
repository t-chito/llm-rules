---
description: making Product Requirements Document
argument-hint: <input 資料のあるディレクトリ>
---

# prd command

`$ARGUMENTS` のディレクトリを読み込んで、要求定義・要件定義のドキュメントを書いてください。
不明な情報は自身で調査するか、私にヒアリングをしてください。

何度か修正指示を出すはずですが、「改訂の内容や背景、経緯」などは改訂履歴として残してください。
改訂履歴で意思決定や思考の流れを記録することで、セッションがリセットされた後、
あるいは他の AI が参照した場合にもコンテクストを保持し、再現性を担保できます。

ファイル構成は以下のようにしてください。
なお、各ファイルは上から順に作成し、1 つずつ完成させていくことを前提とします。
1 つのファイルが完成したら、ユーザーに報告し、レビューを求めてください。
レビューが完了したら、次のファイルに進んでください。

## ファイル構成

```
PRD/
├── 000_overview.md      # プロダクトの概要・背景（Why）
├── 001_spec.md          # 要件定義（What）
├── 002_structure.md     # システム構成・アーキテクチャ
├── 003_tech_stack.md    # 技術スタック選定
├── 004_core.md          # コア機能の処理フロー
└── 005_generated/       # 自動生成・頻繁更新対象
    ├── pages.md         # ページ一覧
    ├── api.md           # API一覧
    └── db.md            # DB構造
```

## 依存関係

```
000_overview.md (独立)
    ↓
001_spec.md (overview参照)
    ↓
002_structure.md (spec参照)
    ↓
003_tech_stack.md (structure参照)
    ↓
004_core.md (spec + structure参照)
    ↓
005_generated/ (全体参照、実装から導出)
```

---

## 000_overview.md テンプレート

### プロダクト概要

- **プロダクト名**:
- **開発期間**:
- **バージョン**:

### 背景・課題

- **解決したい課題**:
- **現状の問題点**:
- **なぜ今作るのか**:

### ターゲット・市場

- **ターゲットユーザー**:
- **市場規模・機会**:
- **競合分析**:

### 成功指標

- **主要 KPI**:
- **測定方法**:
- **目標値**:

### リスク・制約

- **技術的リスク**:
- **事業的リスク**:
- **リソース制約**:

---

## 001_spec.md テンプレート

### 機能要件

#### 主要機能

- **機能名**:
  - **概要**:
  - **受入条件**:
  - **優先度**:

#### 付随機能

- **機能名**:
  - **概要**:
  - **受入条件**:
  - **優先度**:

### 非機能要件

#### パフォーマンス要件

- **応答時間**:
- **処理能力**:
- **同時接続数**:

#### セキュリティ要件

- **認証・認可**:
- **データ保護**:
- **通信暗号化**:

#### 可用性要件

- **稼働率**:
- **障害対応**:
- **バックアップ**:

### UI/UX 要件

- **デザイン方針**:
- **操作性**:
- **アクセシビリティ**:

### 外部連携要件

- **API 連携**:
- **サードパーティサービス**:
- **データ連携**:

---

## 002_structure.md テンプレート

### システム全体構成

- **アーキテクチャパターン**:
- **システム構成図**:
- **コンポーネント関係**:

### フロントエンド構成

- **アプリケーション構造**:
- **状態管理**:
- **ルーティング**:

### バックエンド構成

- **API 設計方針**:
- **データフロー**:
- **認証・認可**:

### インフラ構成

- **デプロイメント構成**:
- **環境構成**:
- **監視・ログ**:

### データ構成

- **データモデル**:
- **データフロー**:
- **データ永続化**:

---

## 003_tech_stack.md テンプレート

### フロントエンド

- **フレームワーク**:
- **UI ライブラリ**:
- **状態管理**:
- **ビルドツール**:

### バックエンド

- **言語・フレームワーク**:
- **API フレームワーク**:
- **認証**:
- **テスト**:

### データベース

- **データベース**:
- **ORM/ODM**:
- **マイグレーション**:

### インフラ

- **ホスティング**:
- **CI/CD**:
- **監視**:
- **ログ**:

### 開発ツール

- **エディタ/IDE**:
- **バージョン管理**:
- **プロジェクト管理**:

### 選定理由

各技術の選定理由を記述

- **技術名**: 選定理由、代替案との比較

---

## 004_core.md テンプレート

### コア機能一覧

- **機能名**:
  - **概要**:
  - **重要度**:
  - **複雑度**:

### 処理フロー

#### 主要フロー

- **フロー名**:
  - **処理ステップ**:
  - **データフロー**:
  - **エラーハンドリング**:

#### 例外フロー

- **フロー名**:
  - **処理ステップ**:
  - **データフロー**:
  - **エラーハンドリング**:

### ビジネスロジック

- **ロジック名**:
  - **処理内容**:
  - **入力・出力**:
  - **制約・条件**:

### 状態管理

- **状態名**:
  - **状態の意味**:
  - **状態遷移**:
  - **更新トリガー**:

### 外部連携

- **連携先**:
  - **連携内容**:
  - **データ形式**:
  - **エラーハンドリング**:

---

## 005_generated/ テンプレート

### pages.md

```markdown
# ページ一覧

## 認証不要ページ

- **ページ名**: URL, 概要, 主要機能

## 認証必要ページ

- **ページ名**: URL, 概要, 主要機能, 権限

## 管理ページ

- **ページ名**: URL, 概要, 主要機能, 権限
```

### api.md

```markdown
# API 一覧

## 認証 API

- **エンドポイント**: Method, URL, 概要, Request/Response

## 機能 API

- **エンドポイント**: Method, URL, 概要, Request/Response

## 管理 API

- **エンドポイント**: Method, URL, 概要, Request/Response
```

### db.md

```markdown
# DB 構造

## テーブル一覧

- **テーブル名**: 概要, 主要カラム

## ER 図

- **関係性**: テーブル間の関係

## インデックス

- **インデックス名**: 対象カラム, 用途
```

---

## 各ファイルの性質・更新頻度

| ファイル          | 性質             | 更新頻度 | 自動生成可能性 |
| ----------------- | ---------------- | -------- | -------------- |
| 000_overview.md   | Why（方針）      | 低       | 不可           |
| 001_spec.md       | What（要件）     | 中       | 部分的         |
| 002_structure.md  | How（設計）      | 中       | 部分的         |
| 003_tech_stack.md | How（技術）      | 低       | 不可           |
| 004_core.md       | What/How（核心） | 中       | 部分的         |
| 005_generated/    | How（詳細）      | 高       | 高             |

## 使用方法

1. **000_overview.md** から順番に作成
2. **001_spec.md** で要件を整理
3. **002-004** で設計を詳細化
4. **005_generated/** は実装と並行して更新
5. 各ファイルは独立して更新可能な粒度で作成
