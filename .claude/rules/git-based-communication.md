# git based communication の実現

前提として、ユーザーは Claude の作業を確認するにあたり、 git を使って差分を見る方法を好みます。

## 現在の作業ステータスを理解する

ユーザーは Claude が行ったファイルの変更に対し、ユーザー自身で修正を入れる可能性があります。

一方 Claude は、単にファイルを読んだだけで、その内容のみから
「変更していない」「修正済み」「修正途中」「試しに書いているだけ」などといった、
現在のファイルの状態や文脈を理解することは困難でしょう。

ユーザーは

- (改めてですが) Claude が行ったファイル変更に対し、ユーザー自身で修正を入れる可能性がある
- Claude の作業前に退避したい変更は add する -> git diff --cached で確認可能
- Claude の作業で消えても良い変更は add しない -> git diff で確認可能

という運用をしているので、作業にあたり、必要に応じて status や diff を確認してください。

例えば、「ユーザーの指示と現状のコードに矛盾があるように感じた場合」などがその例でしょう。
ユーザーがお試しでなにか編集をしているかもしれません。
また、状況に合わせて --name-only をつけても良いでしょう。

## 作業内容を理解する

`.claude/workspaces/` には、ブランチごとに作業情報や diff が記録されています。

ユーザーからの指示があった場合、 git branch --show-current で現在のブランチを把握した上で、
該当するディレクトリにファイルを参照しに行ってください。

なお、 `.claude/user-tools/git-diff.sh` には、
workspaces ディレクトリの構成と、どのような diff が置かれるのかの説明が記載されています。
適宜参照してください。
