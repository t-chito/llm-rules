# 中長期参照出力の生成プロセス

文体を含めて品質が重要で、何度も読み返される文書を作成するための段階的プロセスです。

## 対象となる文書

- プロダクトビジョン
- 技術仕様書
- アーキテクチャドキュメント
- ユーザーガイド
- 技術記事・ブログ
- 提案書・企画書
- 振り返りドキュメント

## 基本原則

### 段階的な情報提供

```
初回応答：核心的な回答（1-3文）
　　↓（必要に応じて）
追加質問への回答：より詳細な情報
　　↓（要求された場合）
実装の詳細や代替案
```

この原則は中長期参照文書でも重要です。読者が段階的に理解を深められるように構成します。

## 5段階の生成プロセス

### Step 1: ペルソナ設定

まず、以下のライターペルソナを憑依させます（sources/writing-pref.md の分析結果より）：

```
私は現場で手を動かしているエンジニアです。
実際にコードを書き、システムを運用し、チームと協働しています。
机上の空論ではなく、実体験に基づいて語ります。
技術の「なぜ」を掘り下げ、その背景にある判断基準を共有します。
複雑な概念も、身近な例を使って分かりやすく説明します。
批判的思考を持ちながら、建設的な代替案を提示します。
```

### Step 2: 草稿生成（口語的に書く）

examples/v1_as-script.md のスタイルで、まず話し言葉で書きます：

**指示例：**
```
「〜について説明してください」という依頼に対して、
まるで同僚に口頭で説明するように、話し言葉で書いてください。
「です・ます」調で、自然な日本語を使ってください。
体言止めは使わず、文章は動詞で終えてください。
```

**チェックポイント：**
- 話し言葉として自然か
- 「なぜ」が説明されているか
- 実体験や具体例が含まれているか
- 読者との対話を意識しているか

### Step 3: 構造化（見出しと段落に整理）

examples/v2_as-structured.md のスタイルで、内容を構造化します：

**指示例：**
```
Step 2 の内容を、以下の観点で構造化してください：
- 論理的な見出しを階層的に配置する
- 各セクションで主張と根拠を明確にする
- 重要なポイントを箇条書きで整理する
- ただし、内容や文体は変更しない
```

**チェックポイント：**
- 見出しが内容を適切に表しているか
- 段落の流れが論理的か
- 情報の重複や漏れがないか

### Step 4: レビュアーペルソナでチェック

批判的レビュアーの人格に切り替えて、以下の観点で厳密にレビューします：

```
私は批判的思考を持つレビュアーです。
文章の論理性、実用性、読みやすさを厳しくチェックします。
曖昧な表現や推測は許しません。
禁止パターンに違反していないか、一つ一つ確認します。
```

**チェック項目：**

#### A. 禁止事項の確認（forbidden-patterns.md）
- [ ] 体言止めを使っていないか
- [ ] 「〜の＋動作性名詞」パターンがないか
- [ ] 絵文字やアスタリスク強調を使っていないか
- [ ] 目的語や助詞を省略していないか
- [ ] 「こと」「もの」で逃げていないか
- [ ] 曖昧な表現（おそらく、一般的には）を使っていないか

#### B. 品質の確認
- [ ] 簡潔性：冗長な説明をしていないか
- [ ] 具体性：抽象的すぎないか
- [ ] 実用性：読者が行動できる内容か

#### C. 原則の確認
- [ ] 結論や要点が明確か
- [ ] 構造が論理的か
- [ ] 読者への配慮があるか

**レビュー結果の例：**
```
【問題点】
1. 3段落目に「システムの構築」という体言止めあり
   → 「システムを構築する」に修正
2. 5段落目が冗長で要点が不明確
   → 3文以内にまとめる
3. 「おそらく」という推測表現が2箇所
   → 削除または断定形に変更

【良い点】
- 実体験に基づく具体例が豊富
- 「なぜ」の説明が明確
- 全体の流れが論理的
```

### Step 5: 対話的修正

レビュー結果を基に修正し、必要に応じて以下のサイクルを繰り返します：

1. **問題箇所の修正** - レビューで指摘された箇所を修正する
2. **フィードバック確認** - 修正が適切か確認する
3. **全体調整** - 修正による全体への影響を確認する
4. **最終チェック** - forbidden-patterns.md で最終確認する

## プロセスの実行例

### 例：技術記事の作成

**Step 1 入力：**
```
「なぜマイクロサービスを採用したのか」について記事を書く
ペルソナ：現場エンジニアとして実体験を語る
```

**Step 2 出力（抜粋）：**
```
マイクロサービスを採用した理由ですか。正直に言うと、最初は懐疑的でした。
モノリスで十分じゃないかって思っていたんです。でも、実際に運用してみると...
```

**Step 3 出力（抜粋）：**
```
## なぜマイクロサービスを採用したのか

### 最初は懐疑的だった

マイクロサービスを採用した理由ですか。正直に言うと、最初は懐疑的でした。
モノリスで十分じゃないかって思っていたんです。

### 実際に運用してみて分かったこと

でも、実際に運用してみると...
```

**Step 4 レビュー：**
```
- 口語的すぎる箇所を少し整える
- 具体的な数値や事例を追加する
- 結論を最初に明示する
```

**Step 5 最終版（抜粋）：**
```
## なぜマイクロサービスを採用したのか

私たちがマイクロサービスを採用した理由は、チームの独立性とデプロイ速度の向上でした。

### 採用前の課題

モノリシックなアーキテクチャでは、20人のエンジニアが同じコードベースで作業していました。
結果として、デプロイは週1回、マージコンフリクトは日常茶飯事でした。
```

## 使用ファイル一覧

| ファイル | 使用タイミング |
|----------|---------------|
| personas.md | Step 1, 4 でペルソナを設定 |
| sources/writing-pref.md | Step 1 でライターペルソナの参考 |
| examples/v1_as-script.md | Step 2 の文体見本 |
| examples/v2_as-structured.md | Step 3 の構造化見本 |
| forbidden-patterns.md | Step 4 でチェックリスト |

## 重要な注意事項

1. **段階を飛ばさない** - 各ステップが品質を保証する
2. **ペルソナを明確に** - 書き手と読み手の人格を分離する
3. **対話的に進める** - 一度で完璧を求めない
4. **禁止事項は絶対** - forbidden-patterns.md は必ず確認する
5. **実体験を重視** - 机上の空論を避ける

このプロセスに従えば、読み返される価値のある文書を作成できます。